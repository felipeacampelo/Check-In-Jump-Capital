{% extends 'adolescentes/base.html' %}
{% block content %}

<h2>Lista de Adolescentes</h2>

<!-- Mostra o total de adolescentes cadastrados -->
<p class="mt-2">
  <strong>Total cadastrados:</strong>
  <span class="badge bg-primary">{{ total_adolescentes }}</span>
</p>

<a href="{% url 'criar_adolescente' %}" class="btn btn-primary mt-3">Adicionar Adolescente</a>

<table class="table mt-3">
    <thead>
        <tr>
            <th>Nome</th>
            <th>Sobrenome</th>
            <th>Gênero</th>
            <th>Data de Nascimento</th>
            <th>Foto</th>
            <th>PG</th>
            <th>Império</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for adolescente in adolescentes %}
        <tr>
            <td>
                <span style="cursor: pointer; color: inherit;" data-bs-toggle="modal" data-bs-target="#modal{{ adolescente.id }}">
                    {{ adolescente.nome }}
                  </span>                  
            </td>
            <td>{{ adolescente.sobrenome }}</td>
            <td>{{ adolescente.genero }}</td>
            <td>{{ adolescente.data_nascimento }}</td>
            <td>
                {% if adolescente.foto %}
                <img src="{{ adolescente.foto.url }}" width="70">
                {% else %}
                Sem foto
                {% endif %}
            </td>
            <td>{{ adolescente.pg }}</td>
            <td>{{ adolescente.imperio }}</td>
            <td>
                <a href="{% url 'editar_adolescente' adolescente.id %}" class="btn btn-secondary">Editar</a>
                <a href="{% url 'excluir_adolescente' adolescente.id %}" class="btn btn-danger">Excluir</a>
            </td>
        </tr>

        <!-- Modal do Adolescente -->
        <div class="modal fade" id="modal{{ adolescente.id }}" tabindex="-1" aria-labelledby="modalLabel{{ adolescente.id }}" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalLabel{{ adolescente.id }}">Detalhes de {{ adolescente.nome }} {{ adolescente.sobrenome }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
              </div>
              <div class="modal-body">
                <p><strong>Nome Completo:</strong> {{ adolescente.nome }} {{ adolescente.sobrenome }}</p>
                <p><strong>Gênero:</strong> {{ adolescente.get_genero_display }}</p>
                <p><strong>Data de Nascimento:</strong> {{ adolescente.data_nascimento|date:"d/m/Y" }}</p>
                <p><strong>Pequeno Grupo (PG):</strong> {{ adolescente.pg }}</p>
                <p><strong>Império:</strong> {{ adolescente.imperio }}</p>
                {% if adolescente.foto %}
                  <p><strong>Foto:</strong></p>
                  <img src="{{ adolescente.foto.url }}" class="img-fluid" alt="Foto de {{ adolescente.nome }}">
                {% endif %}
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
